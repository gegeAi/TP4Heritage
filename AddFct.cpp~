#include "AddFct.h"

//------------------------------------------------------- includes personnels

#include "DeleteFct.h"
#include "Project.h"

GenericFct * AddFct::operator()(Project & project)
{
	for(int i(0); i< project.figure.size(); i++)
	{
		while(project.figure[i]->getName().compare(toAdd.getName) == 0)
		{
			toAdd->correctSameName();
		}
	}
	project.figure[toAdd->getName()] = toAdd;
	save = false;
	return new DeleteFct(toAdd, true);
}

AddFct::AddFct(Form * argToAdd, bool argSave) : GenericFct(), toAdd(argToAdd), save(argSave)
{
#ifdef MAP
	cout << "Call to <AddFct> constructor" << endl;
#endif
}

AddFct::~AddFct()
{
#ifdef MAP
	cout << "Call to <AddFct> destructor" << endl;
#endif

	if(save)
	{
		delete toAdd;
	}
}
